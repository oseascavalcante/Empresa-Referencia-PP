{% extends 'base.html' %}
{% load l10n %}

{% block content %}
<!-- Estilos Específicos do Dashboard -->
<style>
    .titulo-grupo {
        color: #483D8B;
        font-weight: bold;
        margin-bottom: 0.5rem;
    }
    .linha-abaixo-titulo {
        border-bottom: 2px solid #483D8B;
        margin-bottom: 0.5rem;
    }
    .linha-subgrupo {
        border-bottom: 1px solid #b0b0b0;
        margin-bottom: 0.25rem;
    }
    
    /* Melhorias visuais */
    .dashboard-header {
        background-color: #f8f9fa;
        color: #483D8B;
        padding: 1rem;
        border-radius: 4px;
        margin-bottom: 1.5rem;
        border: 1px solid #dee2e6;
    }
    
    /* Espaçamento reduzido para tabelas */
    .table-compact td, .table-compact th {
        padding: 0.5rem 0.75rem;
    }
    
    /* Destaque dos títulos das seções */
    .section-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #483D8B;
    }
</style>

<!-- Container Principal -->
<div class="container-fluid mt-4">
    <!-- Cabeçalho do Dashboard -->
    <div class="dashboard-header">
        <h3 class="mb-0">
            <i class="fas fa-chart-line me-2"></i>
            Dashboard de Custos Diretos
        </h3>
    </div>

    <!-- Filtros Globais -->
    {% include 'dashboard/_filtros.html' %}


    <!-- Módulo de Mão de Obra -->
    {% include 'dashboard/_mao_obra.html' %}

    <!-- Módulo de Equipamentos -->
    {% include 'dashboard/_equipamentos.html' %}

    <!-- Espaço para Futuros Módulos -->
    {# 
    TODO: Implementar módulos futuros:
    {% comment %}
    {% include 'dashboard/_custos_indiretos.html' %}
    {% include 'dashboard/_margem_lucro.html' %}
    {% include 'dashboard/_proposta_comercial.html' %}
    {% endcomment %}
    #}

    <!-- Botões de Ação Global -->
    <div class="row mt-4">
        <div class="col-md-12 d-flex justify-content-end gap-2">
            <button type="button" class="btn btn-outline-secondary" onclick="window.history.back();">
                <i class="fas fa-arrow-left"></i> Voltar
            </button>
            <button type="button" class="btn btn-outline-primary" onclick="window.print();">
                <i class="fas fa-print"></i> Imprimir
            </button>
            <button type="button" class="btn btn-outline-success" onclick="exportarDados();">
                <i class="fas fa-download"></i> Exportar
            </button>
        </div>
    </div>
</div>

<!-- Scripts Modulares -->
{% include 'dashboard/js/_dashboard_base.html' %}
{% include 'dashboard/js/_mao_obra_charts.html' %}
{% include 'dashboard/js/_equipamentos_charts.html' %}

<!-- Rodapé Informativo -->
<div class="text-center mt-5 py-3 border-top">
    <small class="text-muted">
        <i class="fas fa-info-circle"></i>
        Dashboard gerado em {{ "now"|date:"d/m/Y H:i" }} | 
        <strong>Sistema de Precificação v2.0</strong>
    </small>
</div>

{% endblock %}